{"version":3,"sources":["components/CustomUI/LazyImages/LazyImage/index.tsx"],"names":["placeHolder","Image","styled","img","LazyImage","src","alt","style","useState","imageSrc","setImageSrc","imageRef","setImageRef","useEffect","observer","didCancel","IntersectionObserver","entries","forEach","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe","loading","ref","onLoad","event","target","classList","add","onError","memo"],"mappings":"4MAMMA,EAAc,kBAEdC,EAAQC,IAAOC,IAAV,yXAwBMH,GAUjB,SAASI,EAAT,GAA4D,IAAvCC,EAAsC,EAAtCA,IAAKC,EAAiC,EAAjCA,IAAKC,EAA4B,EAA5BA,MAC9B,EAAgCC,mBAASR,GAAzC,mBAAOS,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,qBAAhC,mBAAOG,EAAP,KAAiBC,EAAjB,KA+CA,OArCAC,qBAAU,WACT,IAAIC,EAAgB,KAChBC,GAAY,EA2BhB,OAzBIJ,GAAYF,IAAaJ,IACxBW,sBACHF,EAAW,IAAIE,sBACd,SAACC,GACAA,EAAQC,SAAQ,SAACC,IAEdJ,IACAI,EAAMC,kBAAoB,GAAKD,EAAME,kBAEtCX,EAAYL,GACZS,EAASQ,UAAUX,SAItB,CACCY,UAAW,IACXC,WAAY,SAGLC,QAAQd,GAGjBD,EAAYL,IAGP,WACNU,GAAY,EAERD,GAAYA,EAASQ,WACxBR,EAASQ,UAAUX,MAGnB,CAACN,EAAKI,EAAUE,IAElB,cAACV,EAAD,CACCyB,QAAQ,OACRnB,MAAOA,EACPoB,IAAKf,EACLP,IAAKI,EACLH,IAAKA,EACLsB,OApDa,SAACC,GACfA,EAAMC,OAAOC,UAAUC,IAAI,WAoD1BC,QAjDc,SAACJ,GAChBA,EAAMC,OAAOC,UAAUC,IAAI,gBAqDdE,yBAAK9B","file":"static/js/80.6cb15f20.chunk.js","sourcesContent":["import React, { useState, useEffect, memo } from 'react';\nimport styled from 'styled-components';\n// import LoadingGif from 'assets/images/home/loadingNFT.gif';\n\n// const placeHolder =\n// ('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=');\nconst placeHolder = '/loadingNFT.gif';\n\nconst Image = styled.img`\n\t@keyframes loaded {\n\t\t0% {\n\t\t\topacity: 0.1;\n\t\t}\n\t\t25% {\n\t\t\topacity: 0.25;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t\t75% {\n\t\t\topacity: 0.75;\n\t\t}\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t&.loaded:not(.has-error) {\n\t\tanimation: loaded 500ms ease-in-out;\n\t}\n\n\t&.has-error {\n\t\tcontent: url(${placeHolder});\n\t}\n`;\n\nexport interface LazyImageNFTProps {\n\tsrc: string;\n\talt: string;\n\tstyle?: object;\n}\n\nfunction LazyImage({ src, alt, style }: LazyImageNFTProps) {\n\tconst [imageSrc, setImageSrc] = useState(placeHolder);\n\tconst [imageRef, setImageRef] = useState<any>();\n\n\tconst onLoad = (event: any) => {\n\t\tevent.target.classList.add('loaded');\n\t};\n\n\tconst onError = (event: any) => {\n\t\tevent.target.classList.add('has-error');\n\t};\n\n\tuseEffect(() => {\n\t\tlet observer: any = null;\n\t\tlet didCancel = false;\n\n\t\tif (imageRef && imageSrc !== src) {\n\t\t\tif (IntersectionObserver) {\n\t\t\t\tobserver = new IntersectionObserver(\n\t\t\t\t\t(entries) => {\n\t\t\t\t\t\tentries.forEach((entry) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!didCancel &&\n\t\t\t\t\t\t\t\t(entry.intersectionRatio > 0 || entry.isIntersecting)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetImageSrc(src);\n\t\t\t\t\t\t\t\tobserver.unobserve(imageRef);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tthreshold: 0.01,\n\t\t\t\t\t\trootMargin: '75%',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tobserver.observe(imageRef);\n\t\t\t} else {\n\t\t\t\t// Old browsers fallback\n\t\t\t\tsetImageSrc(src);\n\t\t\t}\n\t\t}\n\t\treturn () => {\n\t\t\tdidCancel = true;\n\t\t\t// on component cleanup, we remove the listner\n\t\t\tif (observer && observer.unobserve) {\n\t\t\t\tobserver.unobserve(imageRef);\n\t\t\t}\n\t\t};\n\t}, [src, imageSrc, imageRef]);\n\treturn (\n\t\t<Image\n\t\t\tloading=\"lazy\"\n\t\t\tstyle={style}\n\t\t\tref={setImageRef}\n\t\t\tsrc={imageSrc}\n\t\t\talt={alt}\n\t\t\tonLoad={onLoad}\n\t\t\tonError={onError}\n\t\t/>\n\t);\n}\n\nexport default memo(LazyImage);\n"],"sourceRoot":""}